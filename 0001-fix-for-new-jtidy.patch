From 5fdd641a5c85c65338ddb8c6ed3ffbfef46f62b0 Mon Sep 17 00:00:00 2001
From: Stanislav Ochotnicky <sochotnicky@redhat.com>
Date: Wed, 29 Sep 2010 13:25:06 +0200
Subject: [PATCH] fix for new jtidy

---
 maven-plugin-tools-api/pom.xml                     |    4 ++--
 .../maven/tools/plugin/util/PluginUtils.java       |    3 ++-
 2 files changed, 4 insertions(+), 3 deletions(-)

diff --git a/maven-plugin-tools-api/pom.xml b/maven-plugin-tools-api/pom.xml
index e05a1fc..6525863 100644
--- a/maven-plugin-tools-api/pom.xml
+++ b/maven-plugin-tools-api/pom.xml
@@ -83,9 +83,9 @@
 
     <!-- misc -->
     <dependency>
-      <groupId>jtidy</groupId>
+      <groupId>net.sf.jtidy</groupId>
       <artifactId>jtidy</artifactId>
-      <version>4aug2000r7-dev</version>
+      <version>r938</version>
     </dependency>
 
     <!-- test -->
diff --git a/maven-plugin-tools-api/src/main/java/org/apache/maven/tools/plugin/util/PluginUtils.java b/maven-plugin-tools-api/src/main/java/org/apache/maven/tools/plugin/util/PluginUtils.java
index f89c036..09e25fe 100644
--- a/maven-plugin-tools-api/src/main/java/org/apache/maven/tools/plugin/util/PluginUtils.java
+++ b/maven-plugin-tools-api/src/main/java/org/apache/maven/tools/plugin/util/PluginUtils.java
@@ -265,7 +265,8 @@ public final class PluginUtils
         tidy.setDocType( "loose" );
         tidy.setXHTML( true );
         tidy.setXmlOut( true );
-        tidy.setCharEncoding( Configuration.UTF8 );
+        tidy.setInputEncoding("UTF-8");
+        tidy.setOutputEncoding("UTF-8");
         tidy.setMakeClean( true );
         tidy.setNumEntities( true );
         tidy.setQuoteNbsp( false );
-- 
1.7.2.3

