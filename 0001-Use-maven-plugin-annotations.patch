From 1ca4dd4d9aac144891948ee648970a033f167f00 Mon Sep 17 00:00:00 2001
From: Mikolaj Izdebski <mizdebsk@redhat.com>
Date: Fri, 15 Jul 2016 11:35:42 +0200
Subject: [PATCH] Use maven-plugin-annotations

---
 plexus-component-metadata/pom.xml                    |  5 +++++
 .../plexus/maven/plugin/PlexusDescriptorMojo.java    | 20 ++++++++------------
 .../plexus/maven/plugin/PlexusMergeMojo.java         | 16 ++++++++--------
 .../maven/plugin/PlexusTestDescriptorMojo.java       | 20 ++++++++------------
 4 files changed, 29 insertions(+), 32 deletions(-)

diff --git a/plexus-component-metadata/pom.xml b/plexus-component-metadata/pom.xml
index 4ca8db2..faa0a2b 100644
--- a/plexus-component-metadata/pom.xml
+++ b/plexus-component-metadata/pom.xml
@@ -21,6 +21,11 @@
       <artifactId>plexus-component-annotations</artifactId>
     </dependency>
     <dependency>
+      <groupId>org.apache.maven.plugin-tools</groupId>
+      <artifactId>maven-plugin-annotations</artifactId>
+      <version>3.4</version>
+    </dependency>
+    <dependency>
       <groupId>org.codehaus.plexus</groupId>
       <artifactId>plexus-utils</artifactId>
     </dependency>
diff --git a/plexus-component-metadata/src/main/java/org/codehaus/plexus/maven/plugin/PlexusDescriptorMojo.java b/plexus-component-metadata/src/main/java/org/codehaus/plexus/maven/plugin/PlexusDescriptorMojo.java
index 2e338c8..29780b3 100644
--- a/plexus-component-metadata/src/main/java/org/codehaus/plexus/maven/plugin/PlexusDescriptorMojo.java
+++ b/plexus-component-metadata/src/main/java/org/codehaus/plexus/maven/plugin/PlexusDescriptorMojo.java
@@ -22,46 +22,42 @@ package org.codehaus.plexus.maven.plugin;
 import java.io.File;
 
 import org.apache.maven.plugin.MojoExecutionException;
+import org.apache.maven.plugins.annotations.LifecyclePhase;
+import org.apache.maven.plugins.annotations.Mojo;
+import org.apache.maven.plugins.annotations.Parameter;
+import org.apache.maven.plugins.annotations.ResolutionScope;
 import org.codehaus.plexus.metadata.MetadataGenerationRequest;
 
 /**
  * Generates a Plexus <tt>components.xml</tt> component descriptor file from source (javadoc) or
  * class annotations.
  * 
- * @goal generate-metadata
- * @phase process-classes
- * @requiresDependencyResolution compile
  * @author Jason van Zyl
  * @author Trygve Laugst&oslash;l
  * @version $Id$
  */
+@Mojo( name = "generate-metadata", defaultPhase = LifecyclePhase.PROCESS_CLASSES, requiresDependencyResolution = ResolutionScope.COMPILE )
 public class PlexusDescriptorMojo
     extends AbstractDescriptorMojo
 {
     /**
      * The output location for the generated descriptor.
-     * 
-     * @parameter default-value="${project.build.outputDirectory}/META-INF/plexus/components.xml"
-     * @required
      */
+    @Parameter( defaultValue = "${project.build.outputDirectory}/META-INF/plexus/components.xml", required = true )
     protected File generatedMetadata;
 
     /**
      * The location of manually crafted component descriptors. The contents of the descriptor files in this directory is
      * merged with the information extracted from the project's sources/classes.
-     * 
-     * @parameter default-value="${basedir}/src/main/resources/META-INF/plexus"
-     * @required
      */
+    @Parameter( defaultValue = "${basedir}/src/main/resources/META-INF/plexus", required = true )
     protected File staticMetadataDirectory;
 
     /**
      * The output location for the intermediary descriptor. This descriptors contains only the information extracted
      * from the project's sources/classes.
-     * 
-     * @parameter default-value="${project.build.directory}/components.xml"
-     * @required
      */
+    @Parameter( defaultValue = "${project.build.directory}/components.xml", required = true )
     protected File intermediaryMetadata;
 
     public void execute()
diff --git a/plexus-component-metadata/src/main/java/org/codehaus/plexus/maven/plugin/PlexusMergeMojo.java b/plexus-component-metadata/src/main/java/org/codehaus/plexus/maven/plugin/PlexusMergeMojo.java
index dec84fb..20f3e4f 100644
--- a/plexus-component-metadata/src/main/java/org/codehaus/plexus/maven/plugin/PlexusMergeMojo.java
+++ b/plexus-component-metadata/src/main/java/org/codehaus/plexus/maven/plugin/PlexusMergeMojo.java
@@ -27,36 +27,36 @@ import java.util.List;
 
 import org.apache.maven.plugin.AbstractMojo;
 import org.apache.maven.plugin.MojoExecutionException;
+import org.apache.maven.plugins.annotations.Component;
+import org.apache.maven.plugins.annotations.LifecyclePhase;
+import org.apache.maven.plugins.annotations.Mojo;
+import org.apache.maven.plugins.annotations.Parameter;
 import org.codehaus.plexus.metadata.merge.Merger;
 
 /**
  * Merges a set of Plexus descriptors into one descriptor file.
  * 
- * @goal merge-metadata
- * @phase process-classes
  * @author Jason van Zyl
  * @author Trygve Laugst&oslash;l
  * @version $Id$
  */
+@Mojo( name = "merge-metadata", defaultPhase = LifecyclePhase.PROCESS_CLASSES )
 public class PlexusMergeMojo
     extends AbstractMojo
 {
     /**
      * The destination for the merged descriptor.
-     * 
-     * @parameter default-value="${project.build.outputDirectory}/META-INF/plexus/components.xml"
-     * @required
      */
+    @Parameter( defaultValue = "${project.build.outputDirectory}/META-INF/plexus/components.xml", required = true )
     private File output;
 
     /**
      * The paths of the input descriptors to merge.
-     * 
-     * @parameter
      */
+    @Parameter
     private File[] descriptors;
 
-    /** @component role-hint="componentsXml" */
+    @Component( hint = "componentsXml" )
     private Merger merger;
 
     public void execute()
diff --git a/plexus-component-metadata/src/main/java/org/codehaus/plexus/maven/plugin/PlexusTestDescriptorMojo.java b/plexus-component-metadata/src/main/java/org/codehaus/plexus/maven/plugin/PlexusTestDescriptorMojo.java
index 366b0a1..6700029 100644
--- a/plexus-component-metadata/src/main/java/org/codehaus/plexus/maven/plugin/PlexusTestDescriptorMojo.java
+++ b/plexus-component-metadata/src/main/java/org/codehaus/plexus/maven/plugin/PlexusTestDescriptorMojo.java
@@ -22,46 +22,42 @@ package org.codehaus.plexus.maven.plugin;
 import java.io.File;
 
 import org.apache.maven.plugin.MojoExecutionException;
+import org.apache.maven.plugins.annotations.LifecyclePhase;
+import org.apache.maven.plugins.annotations.Mojo;
+import org.apache.maven.plugins.annotations.Parameter;
+import org.apache.maven.plugins.annotations.ResolutionScope;
 import org.codehaus.plexus.metadata.MetadataGenerationRequest;
 
 /**
  * Generates a Plexus <tt>components.xml</tt> component descriptor file from test source (javadoc)
  * or test class annotations.
  * 
- * @goal generate-test-metadata
- * @phase process-test-classes
- * @requiresDependencyResolution test
  * @author Jason van Zyl
  * @author Trygve Laugst&oslash;l
  * @version $Id$
  */
+@Mojo( name = "generate-test-metadata", defaultPhase = LifecyclePhase.PROCESS_TEST_CLASSES, requiresDependencyResolution = ResolutionScope.TEST )
 public class PlexusTestDescriptorMojo
     extends AbstractDescriptorMojo
 {
     /**
      * The output location for the generated descriptor.
-     * 
-     * @parameter default-value="${project.build.testOutputDirectory}/META-INF/plexus/components.xml"
-     * @required
      */
+    @Parameter( defaultValue = "${project.build.testOutputDirectory}/META-INF/plexus/components.xml", required = true )
     protected File testGeneratedMetadata;
 
     /**
      * The location of manually crafted component descriptors. The contents of the descriptor files in this directory is
      * merged with the information extracted from the project's sources/classes.
-     * 
-     * @parameter default-value="${basedir}/src/test/resources/META-INF/plexus"
-     * @required
      */
+    @Parameter( defaultValue = "${basedir}/src/test/resources/META-INF/plexus", required = true )
     protected File testStaticMetadataDirectory;
 
     /**
      * The output location for the intermediary descriptor. This descriptors contains only the information extracted
      * from the project's sources/classes.
-     * 
-     * @parameter default-value="${project.build.directory}/test-components.xml"
-     * @required
      */
+    @Parameter( defaultValue = "${project.build.directory}/test-components.xml", required = true )
     protected File testIntermediaryMetadata;
 
     public void execute()
-- 
2.7.4

